<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">
<head th:replace="~{/fragments/header :: meta}"></head>
<body>

<div th:replace="~{/fragments/header :: head}"></div>
<div th:replace="~{/fragments/header :: nav(select=${10})}"></div>

<div th:replace="~{/fragments/header :: erreurs}"></div>

<div class="formbox800">
<h1>Formulaires à traiter</h1>
<table>
    <tr><th>Date Demande</th><th>Langue</th><th>Carte</th><th>Visa</th><th>Actions</th></tr>
    <tr th:each="frm : ${formATrt}">
        <td>[[${frm.dateDemande}]]</td>
        <td><img th:src="@{'/img/flag-'+${frm.langue}+'.png'}" /></td>
        <td><img th:src="@{/img/vrai.png}" th:if="${frm.carte}" /><img th:src="@{/img/faux.png}" th:if="not ${frm.carte}" /></td>
        <td><img th:src="@{/img/vrai.png}" th:if="${frm.visa}" /><img th:src="@{/img/faux.png}" th:if="not ${frm.visa}" /></td>
        <td class="boutonsList">
            <!--<a th:href="@{/Formulaire/{id}(id=${frm.id})}"><img th:src="@{/img/bt_detail.png}" th:alt="#{detail}" th:title="#{detail}"  /></a>-->
            <a th:href="@{/Traitement/form/{id}(id=${frm.id})}"><img th:src="@{/img/bt_modif.png}" th:alt="#{creerTrt.form}" th:title="#{creerTrt.form}"  /></a>
        </td>
    </tr>
</table>

<h1>Formulaire en cours de traitement</h1>
<table>
    <tr><th>Date Demande</th>
        <th>Langue</th>
        <th>Carte</th>
        <th>Visa</th>
        <th>Traitements</th>
        <th>Action</th>
    </tr>
    <tr th:each="frm : ${formEnCours}">
        <td>[[${frm.dateDemande}]]</td>
        <td><img th:src="@{'/img/flag-'+${frm.langue}+'.png'}" /></td>
        <td><img th:src="@{/img/vrai.png}" th:if="${frm.carte}" /><img th:src="@{/img/faux.png}" th:if="not ${frm.carte}" /></td>
        <td><img th:src="@{/img/vrai.png}" th:if="${frm.visa}" /><img th:src="@{/img/faux.png}" th:if="not ${frm.visa}" /></td>
        <td><table>
            <tr><th>Date Traitement</th>
                <th>Nom du gestionnaire</th>
                <th>Appréciation</th>
                <th>Action</th>
            </tr>
            <tr th:each="trtItem : ${frm.trt}">
                <td>[[${trtItem.dateTrt}]]</td>
                <td>[[${trtItem.gest.citoyen.nom}]]</td>
                <td>[[${trtItem.appreciation}]]</td>
                <td class="boutonsList">
                    <a th:href="@{/Traitement/{id}(id=${trtItem.id})}"><img th:src="@{/img/bt_detail.png}" th:alt="#{detail}" th:title="#{detail}"  /></a>
                </td>
            </tr>
        </table>
        <td class="boutonsList">
            <a th:href="@{/Traitement/form/{id}(id=${frm.id})}"><img th:src="@{/img/bt_modif.png}" th:alt="#{creerTrt.form}" th:title="#{creerTrt.form}"  /></a>
        </td>
        </td>
    </tr>
</table>

<h1>Formulaires traités</h1>
<table>
    <tr><th>Date Demande</th>
        <th>Langue</th>
        <th>Carte</th>
        <th>Visa</th>
        <th>Traitement</th>
        <th>Actions</th>
    </tr>
    <tr th:each="frm : ${formFini}">
        <td>[[${frm.dateDemande}]]</td>
        <td><img th:src="@{'/img/flag-'+${frm.langue}+'.png'}" /></td>
        <td><img th:src="@{/img/vrai.png}" th:if="${frm.carte}" /><img th:src="@{/img/faux.png}" th:if="not ${frm.carte}" /></td>
        <td><img th:src="@{/img/vrai.png}" th:if="${frm.visa}" /><img th:src="@{/img/faux.png}" th:if="not ${frm.visa}" /></td>
        <td><table>
            <tr><th>Date Traitement</th>
                <th>Nom du gestionnaire</th>
                <th>Appréciation</th>
                <th>Réponse</th>
                <th>Action</th>
            </tr>
            <tr th:each="trtItem : ${frm.trt}">
                <td>[[${trtItem.dateTrt}]]</td>
                <td>[[${trtItem.gest.citoyen.nom}]]</td>
                <td>[[${trtItem.appreciation}]]</td>
                <td><table>
                    <tr><th>Date Réponse</th>
                        <th>Document</th>
                    </tr>
                    <tr th:each="repItem : ${trtItem.reponses}">
                        <td>[[${repItem.dateReponse}]]</td>
                        <td><table>
                            <tr><th>Type de document</th>
                                <th>N° de document</th>
                                <th>Action</th>
                            </tr>
                            <tr th:each="docArtItem : ${repItem.docArt}">
                                <td>[[${docArtItem.typeDocArtiste}]]</td>
                                <td>[[${docArtItem.noDoc}]]</td>
                                <td class="boutonsList">
                                    <a th:href="@{/Traitement/{id}(id=${docArtItem.id})}"><img th:src="@{/img/bt_detail.png}" th:alt="#{detail}" th:title="#{detail}"  /></a>
                                </td>
                            </tr>
                        </table>
                        </td>
                    </tr>
                </table></td>
                <td class="boutonsList">
                    <a th:href="@{/Traitement/{id}(id=${trtItem.id})}"><img th:src="@{/img/bt_detail.png}" th:alt="#{detail}" th:title="#{detail}"  /></a>
                </td>

            </tr>
        </table>
        <td class="boutonsList">
            <a th:href="@{/Traitement/form/{formId}(formId=${frm.id})}"><img th:src="@{/img/bt_detail.png}" th:alt="#{detail}" th:title="#{detail}"  /></a>
        </td>
        </td>
    </tr>

</table>

</div>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</body>
</html>